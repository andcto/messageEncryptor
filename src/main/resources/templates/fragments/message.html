<article class="media" th:fragment="recivedMessage">
    <div class="media-left">
        <figure class="image is-64x64">
            <img class="is-rounded" src="https://bulma.io/images/placeholders/128x128.png" alt="Image">
        </figure>
    </div>
    <div class="media-content">
        <div class="content">
            <p>
                <strong>John Smith</strong> <small>@johnsmith</small> <small>31m</small>
                <br>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean efficitur sit amet massa fringilla egestas. Nullam condimentum luctus turpis.
                <br>
                <small style="overflow-wrap: anywhere">
                    TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gQWVuZWFuIGVmZmljaXR1ciBzaXQgYW1ldCBtYXNzYSBmcmluZ2lsbGEgZWdlc3Rhcy4gTnVsbGFtIGNvbmRpbWVudHVtIGx1Y3R1cyB0dXJwaXMu
                </small>
            </p>
        </div>
    </div>
</article>

<article class="media" th:fragment="writeMessage">
    <figure class="media-left">
        <p class="image is-64x64">
            <img src="https://bulma.io/images/placeholders/128x128.png">
        </p>
    </figure>
    <div class="media-content">
        <div class="field">
            <p class="control">
                <textarea id="messageContent" class="textarea" placeholder="Add a comment..." style="resize: none"></textarea>
            </p>
        </div>
        <nav class="level">
            <div class="level-left">
                <div class="level-item">
                    <button onclick="sendMessage()" class="button is-info">Enviar</button>
                </div>
                <div class="level-item">
                    <select id="sendUsers" >
                        <option value="0" th:text="Todos"></option>
                        <th:block th:each="u:${listUsers}">
                            <option th:attr="value=${u.id}" th:text="${u.name}"></option>
                        </th:block>
                    </select>
                </div>
            </div>
            <div class="level-right">
                <div class="level-item">
                    <div class="select is-link">
                        <select id="cryptoType" >
                            <th:block th:each="cryptoType:${T(br.com.model.CryptoType).values()}">
                                <option th:attr="value=${cryptoType.ordinal()}" th:text="${cryptoType.name()}"></option>
                            </th:block>
                        </select>
                    </div>
                </div>
            </div>
        </nav>
    </div>

<script>
    function sendMessage(){
        var messageContent = document.getElementById("messageContent");
        var cryptoType = document.getElementById("cryptoType");
        var sendUsers = document.getElementById("sendUsers");

        fetch("message/create", {
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:'{"content":"'+messageContent.value+'","cryptoType":'+cryptoType.value+',"receiver.id":'+sendUsers.value+'}'
        });
    }
</script>
</article>